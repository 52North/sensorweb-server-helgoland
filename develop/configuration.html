<!DOCTYPE html>
<html>
<head>
<title>Configuration – 52°North GmbH – Spatial Information Research</title>     <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    <link rel="apple-touch-icon" sizes="57x57" href="/sensorweb-server-helgoland/develop/assets/images/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/sensorweb-server-helgoland/develop/assets/images/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/sensorweb-server-helgoland/develop/assets/images/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/sensorweb-server-helgoland/develop/assets/images/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/sensorweb-server-helgoland/develop/assets/images/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/sensorweb-server-helgoland/develop/assets/images/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/sensorweb-server-helgoland/develop/assets/images/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/sensorweb-server-helgoland/develop/assets/images/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/sensorweb-server-helgoland/develop/assets/images/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/sensorweb-server-helgoland/develop/assets/images/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/sensorweb-server-helgoland/develop/assets/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/sensorweb-server-helgoland/develop/assets/images/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/sensorweb-server-helgoland/develop/assets/images/favicon-16x16.png">
    <link rel="manifest" href="/sensorweb-server-helgoland/develop/assets/images/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/sensorweb-server-helgoland/develop/assets/images/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    
    <meta name="description" content="Spatial Information Research">
    <meta property="og:description" content="Spatial Information Research" />
    
    <meta name="author" content="52°North GmbH" />

    
    <meta property="og:title" content="Configuration" />
    <meta property="twitter:title" content="Configuration" />
    


<!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

<link rel="stylesheet" type="text/css" href="/sensorweb-server-helgoland/develop/css/styles.css" />
</head>

<body>

  <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
    
  <div class="n52-container container-fluid">
  
    <nav class="navbar navbar-default navbar-fixed-top">
      <div id="contents" class="bs-sidebar hidden-print" style="height: 20px">
        <a href="/sensorweb-server-helgoland/version_3.x"><img alt="52&deg;North logo"
          src="/sensorweb-server-helgoland/develop/assets/images/52n_logo_full.png" /></a>
      </div>
      <div class="container">
        <div class="pull-right navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="http://52north.org">52°North</a></li>
            <li><a href="http://github.com/ridoo/sensorweb-server-helgoland">Sources</a></li>
            <li><a href="http://blog.52north.org">Blog</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <nav class="affix col-lg-2 n52-sidebar">
      <p class="header">
        <a href="/sensorweb-server-helgoland/develop/index.html">Home</a>
      </p>
      <p class="header">
        <a href="/sensorweb-server-helgoland/develop/compatibility.html">Compatibility</a>
      </p>
      <p class="header">
        <a href="/sensorweb-server-helgoland/develop/valuetypes.html">Value Types</a>
      </p>
      <p class="header">
        <a href="/sensorweb-server-helgoland/develop/io.html">Input/Output</a>
      </p>
      <p class="header">
        <a href="/sensorweb-server-helgoland/develop/configuration.html">Configuration</a>
      </p>
      <p class="header">
        <a href="/sensorweb-server-helgoland/develop/paging.html">Paging</a>
      </p>
      <p class="header">
        <a href="/sensorweb-server-helgoland/develop/extensions.html">Extensions</a>
      </p>
      <p class="header">
        <a href="/sensorweb-server-helgoland/develop/api.html">API Reference</a>
      </p>
      <p class="header">
        <a href="/sensorweb-server-helgoland/develop/development.html">API Development</a>
      </p>
    </nav>

    <div role="main" id="content" class="col-lg-9 n52-content pull-right">
      <div class="pull-right">
        <p class="affix up-link n52-top">
          <a href="#"><i class="glyphicon glyphicon-chevron-up" title="top"></i></a>
        </p>
      </div>

      <article class="page">
  <h1>Configuration</h1>

  <div class="entry">
    <p class="n52-callout n52-callout-todo">section under revision/update</p>

<p>The Web interface is intended and prepared for straight integration with Spring MVC. 
However, using Spring as Web framework is not required but leaves open the last 
meters of integrating the endpoint controllers.</p>

<p class="n52-callout n52-callout-todo">make links to Spring MVC and to endpoint controllers.</p>

<p>All endpoints are annotated with Spring’s annotations <code class="highlighter-rouge">Connector</code>, <code class="highlighter-rouge">RequestMethod</code>, 
<code class="highlighter-rouge">RequestMapping</code>, etc. What is needed is a configured <code class="highlighter-rouge">DispatcherServlet</code> 
in the <code class="highlighter-rouge">web.xml</code> and proper beans injections.</p>

<p class="n52-callout n52-callout-todo">Check if/how we can provide a pre-configured <code class="highlighter-rouge">Configuration</code> lib or class which can
be changed/extended by Web application implementors.</p>

<h2 id="configuration-locations">Configuration Locations</h2>
<ul>
  <li><code class="highlighter-rouge">WEB-INF/classes/config-general.properties</code></li>
  <li><code class="highlighter-rouge">WEB-INF/spring/</code></li>
  <li><code class="highlighter-rouge">WEB-INF/classes/application.properties</code></li>
  <li><code class="highlighter-rouge">WEB-INF/web.xml</code> (cors etc.)</li>
</ul>

<div>

    <h2 id="general-configuration">General Configuration</h2>

<h3 id="query-parameter-defaults">Query Parameter Defaults</h3>
<p>Query parameter defaults can be changed under <code class="highlighter-rouge">WEB-INF/classes/config-general.json</code>. For example</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"timeformat"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YYYY-MM-dd, HH:mm"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"generalizer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"defaultGeneralizer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lttb"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"noDataGapThreshold"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"grid"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p class="n52-callout n52-callout-info">Changing API defaults may lead to unexpected results to Web clients. Only change defaults 
if you know what you are doing.</p>

<h3 id="enabling-cors">Enabling CORS</h3>
<p><a href="https://enable-cors.org/index.html">CORS</a> can be enabled via a third party filter (to stay 
independend from a concrete Servlet container which may not ship such filter) within a Web 
application’s <code class="highlighter-rouge">web.xml</code> file. A simple example (which allows all requests) may look like this:</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;filter&gt;</span>
    <span class="nt">&lt;filter-name&gt;</span>CORS<span class="nt">&lt;/filter-name&gt;</span>
    <span class="nt">&lt;filter-class&gt;</span>com.thetransactioncompany.cors.CORSFilter<span class="nt">&lt;/filter-class&gt;</span>
    <span class="nt">&lt;init-param&gt;</span>
        <span class="nt">&lt;param-name&gt;</span>cors.allowOrigin<span class="nt">&lt;/param-name&gt;</span>
        <span class="nt">&lt;param-value&gt;</span>*<span class="nt">&lt;/param-value&gt;</span>
    <span class="nt">&lt;/init-param&gt;</span>
    <span class="nt">&lt;init-param&gt;</span>
        <span class="nt">&lt;param-name&gt;</span>cors.allowGenericHttpRequests<span class="nt">&lt;/param-name&gt;</span>
        <span class="nt">&lt;param-value&gt;</span>true<span class="nt">&lt;/param-value&gt;</span>
    <span class="nt">&lt;/init-param&gt;</span>
    <span class="nt">&lt;init-param&gt;</span>
        <span class="nt">&lt;param-name&gt;</span>cors.supportedMethods<span class="nt">&lt;/param-name&gt;</span>
        <span class="nt">&lt;param-value&gt;</span>GET, POST, HEAD, PUT, DELETE, OPTIONS<span class="nt">&lt;/param-value&gt;</span>
    <span class="nt">&lt;/init-param&gt;</span>
    <span class="nt">&lt;init-param&gt;</span>
        <span class="nt">&lt;param-name&gt;</span>cors.supportedHeaders<span class="nt">&lt;/param-name&gt;</span>
        <span class="nt">&lt;param-value&gt;</span>Content-Type, Content-Encoding, Accept<span class="nt">&lt;/param-value&gt;</span>
    <span class="nt">&lt;/init-param&gt;</span>
    <span class="nt">&lt;init-param&gt;</span>
        <span class="nt">&lt;param-name&gt;</span>cors.exposedHeaders<span class="nt">&lt;/param-name&gt;</span>
        <span class="nt">&lt;param-value&gt;</span>Content-Type, Content-Encoding<span class="nt">&lt;/param-value&gt;</span>
    <span class="nt">&lt;/init-param&gt;</span>
<span class="nt">&lt;/filter&gt;</span>
<span class="nt">&lt;filter-mapping&gt;</span>
    <span class="nt">&lt;filter-name&gt;</span>CORS<span class="nt">&lt;/filter-name&gt;</span>
    <span class="nt">&lt;url-pattern&gt;</span>/*<span class="nt">&lt;/url-pattern&gt;</span>
<span class="nt">&lt;/filter-mapping&gt;</span>
</code></pre>
</div>

<p class="n52-callout n52-callout-info">You can <a href="http://www.test-cors.org/">test your CORS config</a> if configured correctly.</p>



    <h2 id="managing-configuration">Managing Configuration</h2>

<h3 id="separate-properties">Separate Properties</h3>
<p>It is helpful to separate all properties values from XML configuration for several
reasons. First, it may be tedious to find all single properties within verbose XML. 
However, more it also very important to keep sensitive information (like database
configuration) from the project itself.</p>

<p>Create a <code class="highlighter-rouge">WEB-INF/classes/application.properties</code> file which will keep all the default 
values. Another may be located under your home directory. Configure the following which
will first take parameters</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="c">&lt;!-- these properties do override default settings --&gt;</span>
<span class="nt">&lt;ctx:property-placeholder</span> 
    <span class="err">&lt;!--</span> <span class="err">${user.home}/application.properties}</span> <span class="err">when</span> <span class="err">-Dlocal.configFile</span> <span class="err">not</span> <span class="err">defined</span> <span class="err">--</span><span class="nt">&gt;</span>
    location="${local.configFile:${user.home}/application.properties}"
    ignore-resource-not-found="true" ignore-unresolvable="true" order="0" /&gt;

<span class="c">&lt;!-- default settings --&gt;</span>
<span class="nt">&lt;ctx:property-placeholder</span> 
    <span class="na">location=</span><span class="s">"classpath:/application.properties"</span>
    <span class="na">ignore-resource-not-found=</span><span class="s">"false"</span> <span class="na">ignore-unresolvable=</span><span class="s">"false"</span> <span class="na">order=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
</code></pre>
</div>

<p>A placeholder can now be declared within Spring XML files via <code class="highlighter-rouge">${placeholder:default}</code>.
If present in the application properties file (your one or the default) it will be 
replaced, otherwise the given default will be used.</p>

<h3 id="separate-configuration-sections">Separate Configuration Sections</h3>

<p>To keep overview we can separate parts of the configuration files and include them
via file import, e.g. <code class="highlighter-rouge">&lt;import resource="mvc.xml" /&gt;</code>.</p>



    <h2 id="configuring-web-layer">Configuring Web Layer</h2>
<p>The Web Layer can be configured by Spring MVC controllers served by a dispatcher servlet 
(configured in <code class="highlighter-rouge">web.xml</code>). Configuration includes content negotiation, serialization config, 
and Web controller injections.</p>

<h3 id="dispatcher-servlet">Dispatcher Servlet</h3>

<p>This describes an example configuration via Spring. There are lots of variants and 
alternatives which may end in the same result. This example splits Spring configuration 
files into two main files:</p>

<ul>
  <li><code class="highlighter-rouge">/WEB-INF/spring/dispatcher-servlet.xml</code> contains Web controllers and views</li>
  <li><code class="highlighter-rouge">/WEB-INF/spring/application-context.xml</code> contains SPI implementations</li>
</ul>

<p>However, everything starts by adding Spring’s <code class="highlighter-rouge">DispatcherServlet</code> within the <code class="highlighter-rouge">web.xml</code>, 
put both configuration files, and relate it to some context path like so:</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;servlet&gt;</span>
  <span class="nt">&lt;servlet-name&gt;</span>api-dispatcher<span class="nt">&lt;/servlet-name&gt;</span>
  <span class="nt">&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="nt">&lt;/servlet-class&gt;</span>
  <span class="nt">&lt;init-param&gt;</span>
     <span class="nt">&lt;param-name&gt;</span>contextConfigLocation<span class="nt">&lt;/param-name&gt;</span>
     <span class="nt">&lt;param-value&gt;</span>/WEB-INF/spring/dispatcher-servlet.xml,/WEB-INF/spring/application-context.xml<span class="nt">&lt;/param-value&gt;</span>
  <span class="nt">&lt;/init-param&gt;</span>
  <span class="nt">&lt;load-on-startup&gt;</span>1<span class="nt">&lt;/load-on-startup&gt;</span>
<span class="nt">&lt;/servlet&gt;</span>

<span class="nt">&lt;servlet-mapping&gt;</span>
  <span class="nt">&lt;servlet-name&gt;</span>api-dispatcher<span class="nt">&lt;/servlet-name&gt;</span>
  <span class="nt">&lt;url-pattern&gt;</span>/api/*<span class="nt">&lt;/url-pattern&gt;</span>
<span class="nt">&lt;/servlet-mapping&gt;</span>
</code></pre>
</div>

<h3 id="content-negotiation">Content Negotiation</h3>
<p>To support proper content negotiation and JSON serialization the following should be 
added to the <code class="highlighter-rouge">/WEB-INF/spring/dispatcher-servlet.xml</code>:</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;mvc:annotation-driven</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;ctx:annotation-config</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"objectMapper"</span> <span class="na">class=</span><span class="s">"com.fasterxml.jackson.databind.ObjectMapper"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"serializationInclusion"</span> <span class="na">value=</span><span class="s">"NON_NULL"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"jsonViewResolver"</span> <span class="na">class=</span><span class="s">"org.springframework.web.servlet.view.json.MappingJackson2JsonView"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"extractValueFromSingleKeyModel"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"objectMapper"</span> <span class="na">ref=</span><span class="s">"objectMapper"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;mvc:annotation-driven</span> <span class="na">content-negotiation-manager=</span><span class="s">"contentNegotiationManager"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"contentNegotiationManager"</span> <span class="na">class=</span><span class="s">"org.springframework.web.accept.ContentNegotiationManagerFactoryBean"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"defaultContentType"</span> <span class="na">value=</span><span class="s">"application/json"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.springframework.web.servlet.view.ContentNegotiatingViewResolver"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"defaultViews"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;util:list&gt;</span>
            <span class="nt">&lt;ref</span> <span class="na">bean=</span><span class="s">"jsonViewResolver"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/util:list&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</code></pre>
</div>

<h3 id="web-controller-injections">Web Controller injections</h3>
<p>A Web controller serves an endpoint and behaves like described in the <a href="/sensorweb-server-helgoland/develop/api.html">Web API</a>. It 
performs <a href="/sensorweb-server-helgoland/develop/io.html">I/O operations</a> (graph rendering, generalization, etc.) if neccessary.</p>

<p class="n52-callout n52-callout-info">A Web controller delegates data request to the actual SPI implementation so it has to be 
referenced here. SPI implementors have to use these references to make sure the right
backend service is called.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;mvc:annotation-driven</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;ctx:annotation-config</span> <span class="nt">/&gt;</span>

<span class="c">&lt;!--
    This bean description file injects the Web binding layer. SPI implementation 
    beans have to match the ref-ids associated below.
--&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.web.ctrl.ResourcesController"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"metadataService"</span> <span class="na">ref=</span><span class="s">"metadataService"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.web.ctrl.SearchController"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"searchService"</span> <span class="na">ref=</span><span class="s">"searchService"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="c">&lt;!-- a parent controller configuration --&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.web.ctrl.ParameterController"</span> <span class="na">id=</span><span class="s">"parameterController"</span> <span class="na">abstract=</span><span class="s">"true"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- ${external.url} property is configured in an external properties file (see above) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"externalUrl"</span> <span class="na">value=</span><span class="s">"${external.url}"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"metadataExtensions"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;list&gt;</span>
            <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.io.response.extension.LicenseExtension"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/list&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.web.ctrl.OfferingsParameterController"</span> <span class="na">parent=</span><span class="s">"parameterController"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"parameterService"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.web.ctrl.ParameterBackwardsCompatibilityAdapter"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">"0"</span> <span class="na">ref=</span><span class="s">"offeringParameterService"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/bean&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.web.ctrl.ServicesParameterController"</span> <span class="na">parent=</span><span class="s">"parameterController"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"parameterService"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.web.ctrl.ParameterBackwardsCompatibilityAdapter"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">"0"</span> <span class="na">ref=</span><span class="s">"serviceParameterService"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/bean&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.web.ctrl.CategoriesParameterController"</span> <span class="na">parent=</span><span class="s">"parameterController"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"parameterService"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.web.ctrl.ParameterBackwardsCompatibilityAdapter"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">"0"</span> <span class="na">ref=</span><span class="s">"categoryParameterService"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/bean&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.web.ctrl.FeaturesParameterController"</span> <span class="na">parent=</span><span class="s">"parameterController"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"parameterService"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.web.ctrl.ParameterBackwardsCompatibilityAdapter"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">"0"</span> <span class="na">ref=</span><span class="s">"featureParameterService"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/bean&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.web.ctrl.ProceduresParameterController"</span> <span class="na">parent=</span><span class="s">"parameterController"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"parameterService"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.web.ctrl.ParameterBackwardsCompatibilityAdapter"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">"0"</span> <span class="na">ref=</span><span class="s">"procedureParameterService"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/bean&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.web.ctrl.PhenomenaParameterController"</span> <span class="na">parent=</span><span class="s">"parameterController"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"parameterService"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.web.ctrl.ParameterBackwardsCompatibilityAdapter"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">"0"</span> <span class="na">ref=</span><span class="s">"phenomenonParameterService"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/bean&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.web.ctrl.PlatformsParameterController"</span> <span class="na">parent=</span><span class="s">"parameterController"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"parameterService"</span> <span class="na">ref=</span><span class="s">"platformParameterService"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"metadataExtensions"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;list</span> <span class="na">merge=</span><span class="s">"true"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.io.extension.parents.HierarchicalParameterExtension"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"service"</span> <span class="na">ref=</span><span class="s">"hierarchicalParameterService"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/bean&gt;</span>
        <span class="nt">&lt;/list&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.web.ctrl.GeometriesController"</span> <span class="na">parent=</span><span class="s">"parameterController"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"parameterService"</span> <span class="na">ref=</span><span class="s">"geometriesService"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.web.ctrl.DatasetController"</span> <span class="na">parent=</span><span class="s">"parameterController"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"parameterService"</span> <span class="na">ref=</span><span class="s">"datasetService"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"metadataExtensions"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;list</span> <span class="na">merge=</span><span class="s">"true"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.io.extension.RenderingHintsExtension"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.io.extension.StatusIntervalsExtension"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.io.extension.resulttime.ResultTimeExtension"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"service"</span> <span class="na">ref=</span><span class="s">"resultTimeService"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/bean&gt;</span>
            <span class="c">&lt;!-- Using DatabaseMetadataExtension requires some preparation work. --&gt;</span>
            <span class="c">&lt;!--&lt;bean class="org.n52.io.extension.metadata.DatabaseMetadataExtension" /&gt;--&gt;</span>
        <span class="nt">&lt;/list&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.web.ctrl.DataController"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"dataService"</span> <span class="na">ref=</span><span class="s">"datasetService"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"datasetService"</span> <span class="na">ref=</span><span class="s">"datasetService"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"preRenderingTask"</span> <span class="na">ref=</span><span class="s">"preRenderingJob"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"requestIntervalRestriction"</span> <span class="na">value=</span><span class="s">"${request.interval.restriction}"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</code></pre>
</div>

<div class="n52-callout n52-callout-info">
  <p>Known application properties are 
Some things to note:</p>

  <ul>
    <li><code class="highlighter-rouge">${external.url}</code> and <code class="highlighter-rouge">${request.interval.restriction}</code> are property placeholders defined in 
an extra application properties file</li>
    <li><code class="highlighter-rouge">org.n52.web.ctrl.ParameterBackwardsCompatibilityAdapter</code> is a backwards compatibility wrapper</li>
    <li><code class="highlighter-rouge">metadataExtensions</code> list contains extensions which adds further metadata to <code class="highlighter-rouge">/&lt;endpoint&gt;/extras</code></li>
  </ul>

</div>

<h3 id="general-properties">General Properties</h3>
<p>Configurable properties are</p>

<ul>
  <li><code class="highlighter-rouge">requestIntervalRestriction</code>: sets the maximum time period a clients can query data for, e.g. <code class="highlighter-rouge">P380D</code></li>
  <li><code class="highlighter-rouge">externalUrl</code>: sets the external URL under which the API can be accessed by clients, e.g. (<code class="highlighter-rouge">https://example.com/my-api/</code>)</li>
</ul>

<h2 id="extensions">Extensions</h2>
<p>See <a href="/sensorweb-server-helgoland/develop/extensions.html">Extension section</a> for how to configure extensions in detail.</p>



    <h2 id="common-utils">Common Utils</h2>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.series.db.dao.DefaultDbQueryFactory"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"databaseSrid"</span> <span class="na">value=</span><span class="s">"${database.srid}"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.series.db.da.EntityCounter"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"metadataService"</span> <span class="na">class=</span><span class="s">"org.n52.series.srv.CountingMetadataAccessService"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"searchService"</span> <span class="na">class=</span><span class="s">"org.n52.series.srv.Search"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.series.db.da.DefaultDataRepositoryFactory"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.io.DefaultIoFactory"</span> <span class="nt">/&gt;</span>
</code></pre>
</div>

<h3 id="static-service-entity">Static Service Entity</h3>
<p>In case of a unique data backend a static service entity can be defined via Spring bean. Here’s an example</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.n52.series.db.beans.ServiceEntity"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"pkid"</span> <span class="na">value=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"version"</span> <span class="na">value=</span><span class="s">"2.0"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">value=</span><span class="s">"My Dataset Service"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"noDataValues"</span> <span class="na">value=</span><span class="s">"-9999.0,99999,NO_DATA"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</code></pre>
</div>


</div>

  </div>
</article>
    </div>
  </div>


  <footer class="footer">
    
    <div class="col-lg-5">
      <ul>
        <li>Design and Content by <a href="http://52north.org/" target="_blank">52&deg;North</a></li>
        <li>Content licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a></li>
        <li><a href="http://glyphicons.com">Glyphicons Free</a> licensed under <a
                        href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a></li>
      </ul>
    </div>
    <div class="col-lg-5 pull-right">
      <ul class="footer-links">
          <li><a href="http://52north.org/swe">Sensor Web Community</a></li>
          <li class="muted">&middot;</li>
          <li><a href="mailto:h.bredel@52north.org">Contact</a></li>
      </ul>
      <p>Last Rev.: <a href="http://github.com/ridoo/sensorweb-server-helgoland/tree/cab6ba7420142198ad6d749c434ea5855f947d71">cab6ba7420142198ad6d749c434ea5855f947d71</a></p>
      
    </div>
  </footer>

</body>
</html>
