<!DOCTYPE html>
<html>
<head>
<title>Input/Output – 52°North GmbH – Spatial Information Research</title>     <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    <link rel="apple-touch-icon" sizes="57x57" href="/sensorweb-server-helgoland/develop/assets/images/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/sensorweb-server-helgoland/develop/assets/images/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/sensorweb-server-helgoland/develop/assets/images/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/sensorweb-server-helgoland/develop/assets/images/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/sensorweb-server-helgoland/develop/assets/images/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/sensorweb-server-helgoland/develop/assets/images/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/sensorweb-server-helgoland/develop/assets/images/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/sensorweb-server-helgoland/develop/assets/images/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/sensorweb-server-helgoland/develop/assets/images/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/sensorweb-server-helgoland/develop/assets/images/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/sensorweb-server-helgoland/develop/assets/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/sensorweb-server-helgoland/develop/assets/images/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/sensorweb-server-helgoland/develop/assets/images/favicon-16x16.png">
    <link rel="manifest" href="/sensorweb-server-helgoland/develop/assets/images/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/sensorweb-server-helgoland/develop/assets/images/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    
    <meta name="description" content="Spatial Information Research">
    <meta property="og:description" content="Spatial Information Research" />
    
    <meta name="author" content="52°North GmbH" />

    
    <meta property="og:title" content="Input/Output" />
    <meta property="twitter:title" content="Input/Output" />
    


<!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

<link rel="stylesheet" type="text/css" href="/sensorweb-server-helgoland/develop/css/styles.css" />
</head>

<body>

  <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
    
  <div class="n52-container container-fluid">
  
    <nav class="navbar navbar-default navbar-fixed-top">
      <div id="contents" class="bs-sidebar hidden-print" style="height: 20px">
        <a href="/sensorweb-server-helgoland/version_3.x"><img alt="52&deg;North logo"
          src="/sensorweb-server-helgoland/develop/assets/images/52n_logo_full.png" /></a>
      </div>
      <div class="container">
        <div class="pull-right navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="http://52north.org">52°North</a></li>
            <li><a href="http://github.com/ridoo/sensorweb-server-helgoland">Sources</a></li>
            <li><a href="http://blog.52north.org">Blog</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <nav class="affix col-lg-2 n52-sidebar">
      <p class="header">
        <a href="/sensorweb-server-helgoland/develop/index.html">Home</a>
      </p>
      <p class="header">
        <a href="/sensorweb-server-helgoland/develop/compatibility.html">Compatibility</a>
      </p>
      <p class="header">
        <a href="/sensorweb-server-helgoland/develop/valuetypes.html">Value Types</a>
      </p>
      <p class="header">
        <a href="/sensorweb-server-helgoland/develop/io.html">Input/Output</a>
      </p>
      <p class="header">
        <a href="/sensorweb-server-helgoland/develop/configuration.html">Configuration</a>
      </p>
      <p class="header">
        <a href="/sensorweb-server-helgoland/develop/paging.html">Paging</a>
      </p>
      <p class="header">
        <a href="/sensorweb-server-helgoland/develop/extensions.html">Extensions</a>
      </p>
      <p class="header">
        <a href="/sensorweb-server-helgoland/develop/api.html">API Reference</a>
      </p>
      <p class="header">
        <a href="/sensorweb-server-helgoland/develop/development.html">API Development</a>
      </p>
    </nav>

    <div role="main" id="content" class="col-lg-9 n52-content pull-right">
      <div class="pull-right">
        <p class="affix up-link n52-top">
          <a href="#"><i class="glyphicon glyphicon-chevron-up" title="top"></i></a>
        </p>
      </div>

      <article class="page">
  <h1>Input/Output</h1>

  <div class="entry">
    <p>Depending on the requested data type the API offers some Input/Output processing.
In case of <code class="highlighter-rouge">quantity</code> datasets a client might request a rendered chart instead 
of raw data.</p>

<p>The following sections list currently supported I/O operations.</p>

<ul id="markdown-toc">
  <li><a href="#chart-rendering" id="markdown-toc-chart-rendering">Chart Rendering</a>    <ul>
      <li><a href="#line-charts" id="markdown-toc-line-charts">Line Charts</a></li>
      <li><a href="#bar-charts" id="markdown-toc-bar-charts">Bar Charts</a></li>
      <li><a href="#overlaying-datasets" id="markdown-toc-overlaying-datasets">Overlaying Datasets</a></li>
    </ul>
  </li>
  <li><a href="#generalizing-raw-data" id="markdown-toc-generalizing-raw-data">Generalizing Raw Data</a>    <ul>
      <li><a href="#largest-triangle-three-bucket-downsampling-default" id="markdown-toc-largest-triangle-three-bucket-downsampling-default">Largest-Triangle-Three Bucket Downsampling (default)</a></li>
      <li><a href="#douglas-peucker-downsampling" id="markdown-toc-douglas-peucker-downsampling">Douglas-Peucker Downsampling</a></li>
    </ul>
  </li>
  <li><a href="#formatting-raw-data" id="markdown-toc-formatting-raw-data">Formatting Raw Data</a>    <ul>
      <li><a href="#tvp-format-default" id="markdown-toc-tvp-format-default">TVP Format (default)</a></li>
      <li><a href="#highchart-format" id="markdown-toc-highchart-format">Highchart Format</a></li>
    </ul>
  </li>
</ul>

<h2 id="chart-rendering">Chart Rendering</h2>

<p class="n52-callout n52-callout-info">Chart rendering is only supported for <code class="highlighter-rouge">quantity</code> types.</p>

<p>The following diagram types are available and can be set via style options:</p>

<ul>
  <li>line charts</li>
  <li>bar charts</li>
</ul>

<p>Styles can be used whereever a chart is rendered. It does not matter if you request 
an image or a report (which embeds the chart).</p>

<h3 id="line-charts">Line Charts</h3>

<p>The following style properties can be set.</p>

<table class="table">
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">lineType</code></td>
      <td>The line style. Possible values are <code class="highlighter-rouge">solid</code>, <code class="highlighter-rouge">dotted</code> or <code class="highlighter-rouge">dashed</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">width</code></td>
      <td>The thickness of a line as integer, dash gap, point size (dependend on the chart type to be rendered)</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">color</code></td>
      <td>A 6-digit hex color value, e.g. <code class="highlighter-rouge">#5f5f5f</code></td>
    </tr>
  </tbody>
</table>

<p><strong>Example</strong></p>
<div class="clearfix">
<div class="col-lg-5">
  <img alt="lineChart" src="/sensorweb-server-helgoland/develop/assets/images/io_chart_linestyle_example.png" title="Example for a line chart style." />
</div>
<div class="col-lg-5 pull-right">
<pre>{
  "chartType": "line",
  "properties": {
    "type": "dashed",
    "width": 4,
    "color": "#0000ff"
  }
}</pre>
</div>
 </div>

<h3 id="bar-charts">Bar Charts</h3>

<p>The following style properties can be set.</p>

<table class="table">
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">interval</code></td>
      <td>The time period a bar shall represent. Possible values are <code class="highlighter-rouge">byDay</code>, <code class="highlighter-rouge">byWeek</code>, <code class="highlighter-rouge">byMonth</code>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">width</code></td>
      <td>Value between <code class="highlighter-rouge">0</code> and <code class="highlighter-rouge">1</code>, which defines the bar width in percent (<code class="highlighter-rouge">width=1</code> means maximum width, i.e. bar next to bar).</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">color</code></td>
      <td>A 6-digit hex color value, e.g. <code class="highlighter-rouge">#5f5f5f</code></td>
    </tr>
  </tbody>
</table>

<p><strong>Example</strong></p>
<div class="clearfix">
<div class="col-lg-5">
  <img alt="lineChart" src="/sensorweb-server-helgoland/develop/assets/images/io_chart_barstyle_example.png" title="Example for a bar chart style." />
</div>
<div class="col-lg-5 pull-right">
<pre>{
  "chartType": "bar",
  "properties": {
    "interval": "byDay",
    "width": 0.8,
    "color": "#0000ff"
  }
}</pre>
</div>
</div>

<h3 id="overlaying-datasets">Overlaying Datasets</h3>

<div class="clearfix">
<div class="col-lg-6">
    <img alt="combinedCharts" src="/sensorweb-server-helgoland/develop/assets/images/io_chart_overlay_example.png" title="Example of combined charts." />
</div>
<div class="col-lg-5 pull-right">
<pre>POST /api/v1/datasets/data HTTP/1.1
Host: example.org
Content-Type: application/json
Accept: image/png

{
  "legend": true,
  "timespan": "P0Y0M3D/2013-01-31TZ",
  "width": 400,
  "height": 300,
  "language": "de",
  "grid": true,
  "styleOptions": {
    "ts_eafa3af4e61db76b367746980d149b7e": {
      "chartType": "line",
      "properties": {
        "color": "#0000FF",
        "lineType": "solid",
        "width": 1
      }
    },
    "ts_92385cd6fb670e886cab8e542185e847": {
      "chartType": "bar",
      "properties": {
        "color": "#2f2f2f",
        "interval": "byHour",
        "width": 0.7
      }
    }
  }
}</pre>
</div>
</div>

<div class="n52-callout n52-callout-info">
  <p>If you are interested in the PNG output you can either parse it from your
favorite programming language. For a quick review you can use Curl from command line
(adapt parameters as needed, e.g. if you want a PDF report instead):</p>

  <div class="highlighter-rouge"><pre class="highlight"><code>curl -X POST -d 'PASTE IN HERE YOUR POST REQUEST' \
-H "content-type:application/json" -H "accept:image/png" \
http://localhost:8080/api/v1/timeseries/getData &amp;gt; img.png
</code></pre>
  </div>
</div>

<h2 id="generalizing-raw-data">Generalizing Raw Data</h2>

<p class="n52-callout n52-callout-info">Chart rendering is only supported for <code class="highlighter-rouge">quantity</code> types.</p>

<p>Depending on sampling resolution and timespan timeseries data can be huge. Generalizing data can make 
sense in more than just a low bandwidth use case (e.g. smoothing the curve).</p>

<p>Generalization can be enabled by <code class="highlighter-rouge">generalize=true</code> query parameter. By default generalization behaviour 
is set to <code class="highlighter-rouge">false</code>. The API currently supports two generalization algorithms.</p>

<h3 id="largest-triangle-three-bucket-downsampling-default">Largest-Triangle-Three Bucket Downsampling (default)</h3>

<p>Downsamples to a fix amount of output values 
(<a href="http://skemman.is/stream/get/1946/15343/37285/3/SS_MSthesis.pdf">Details</a>). This is the default
algorithm chosen, when <code class="highlighter-rouge">generalizing_algorithm</code> parameter is missing.</p>

<p>Parameters</p>
<ul>
  <li><code class="highlighter-rouge">generalize=true</code></li>
  <li><code class="highlighter-rouge">generalizing_algorithm=lttb</code></li>
  <li><code class="highlighter-rouge">threshold={int-value}</code> (default is <code class="highlighter-rouge">200</code>)</li>
</ul>

<h3 id="douglas-peucker-downsampling">Douglas-Peucker Downsampling</h3>

<p>Downsamples timeseries values by using a threshold value 
(<a href="http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm">Details</a>).</p>

<p>Parameters</p>
<ul>
  <li><code class="highlighter-rouge">generalize=true</code></li>
  <li><code class="highlighter-rouge">generalizing_algorithm=dp</code></li>
  <li><code class="highlighter-rouge">tolerance_value={double-value}</code> (default is 0.1)</li>
</ul>

<h2 id="formatting-raw-data">Formatting Raw Data</h2>

<p class="n52-callout n52-callout-info">Chart rendering is only supported for <code class="highlighter-rouge">quantity</code> types.</p>

<p>Raw data can be requested in a specific format. This can be useful if you work with a specific chart API 
and want to avoid to convert data outout from one format to another. Possible formats are:</p>

<ul>
  <li><code class="highlighter-rouge">tvp</code> (the default)</li>
  <li><code class="highlighter-rouge">highchart</code></li>
</ul>

<p>To retrieve extra reference values (if available for that timeseries) valid for the requested timespan just
add <code class="highlighter-rouge">expand=true</code>.</p>

<p class="n52-callout n52-callout-info">Serving arbitrary formats is limited. Most probably you have to combine timeseries metadata and the actual 
data differently within the used API. Please refer to the actual data output so that it can be used as 
intended by the 3rd party API.</p>

<h3 id="tvp-format-default">TVP Format (default)</h3>

<p>The format returns timeseries data as time-value tuples.</p>

<p><strong>Example (single dataset)</strong></p>
<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1376524800000</span><span class="p">,</span><span class="w">
      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">433.0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1376524860000</span><span class="p">,</span><span class="w">
      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">432.4</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1376524920000</span><span class="p">,</span><span class="w">
      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">432.0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1376524980000</span><span class="p">,</span><span class="w">
      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">431.1</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p><strong>Example (multiple datasets)</strong></p>
<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"ts_ad3edeff973ab62e39f76c14f95d1e82"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"ts_c8ed5ddbb89c19b2e385de23eecbde98"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1376589600000</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">546</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1376589660000</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">546.6</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1376589720000</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">547</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p class="n52-callout n52-callout-info">Please note that when adding <code>expanded=true</code>, reference values will be added as
a dataset on their own. You can track reference values with the corresponding identifiers 
available from the dataset metadata.</p>

<h3 id="highchart-format">Highchart Format</h3>

<p>The format returns timeseries data in <a href="http://api.highcharts.com/highcharts#series">Highcharts series format</a>. 
To add metadata or a readable dataset name you will have to replace the <code class="highlighter-rouge">datasetId</code> with a 
readable label taken from the Dataset metadata.</p>

<p><strong>Example (single dataset)</strong></p>
<pre><code class="language-{">  "name": "ts_c8ed5ddbb89c19b2e385de23eecbde98",
  "data": [
    [
      1376524800000,
      433.3
    ],
    [
      1376524860000,
      432.4
    ],
    [
      1376524920000,
      432.1
    ]
  ]
}
</code></pre>

<p><strong>Example (multiple datasets)</strong></p>
<div class="highlighter-rouge"><pre class="highlight"><code>[
  {
    "name": "ts_ad3edeff973ab62e39f76c14f95d1e82",
    "data": []
  },
  {
    "name": "ts_c8ed5ddbb89c19b2e385de23eecbde98",
    "data": [
      [
        1376589600000,
        546
      ],
      [
        1376589660000,
        546.6
      ],
      [
        1376589720000,
        547
      ],
      [
        1376589780000,
        548
      ]
    ]
  }
]
</code></pre>
</div>

  </div>
</article>
    </div>
  </div>


  <footer class="footer">
    
    <div class="col-lg-5">
      <ul>
        <li>Design and Content by <a href="http://52north.org/" target="_blank">52&deg;North</a></li>
        <li>Content licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a></li>
        <li><a href="http://glyphicons.com">Glyphicons Free</a> licensed under <a
                        href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a></li>
      </ul>
    </div>
    <div class="col-lg-5 pull-right">
      <ul class="footer-links">
          <li><a href="http://52north.org/swe">Sensor Web Community</a></li>
          <li class="muted">&middot;</li>
          <li><a href="mailto:h.bredel@52north.org">Contact</a></li>
      </ul>
      <p>Last Rev.: <a href="http://github.com/ridoo/sensorweb-server-helgoland/tree/cab6ba7420142198ad6d749c434ea5855f947d71">cab6ba7420142198ad6d749c434ea5855f947d71</a></p>
      
    </div>
  </footer>

</body>
</html>
